[build]
target = "i686-elf.json"

[unstable]
build-std = ["core", "compiler_builtins"]
build-std-features = ["compiler-builtins-mem"]

[target.i686-elf]
rustflags = [
    "-C",
    "no-redzone=yes",          # -mno-red-zone
    "-C",
    "code-model=kernel",       # wow chat
    "-C",
    "relocation-model=static", # static linking
    "-C",
    "link-arg=-nostdlib",
    "-C",
    "link-arg=-nostartfiles",
    "-C",
    "link-arg=-nodefaultlibs",
    # "-C",
    # "align-functions=16",         # falign-functions
    # "-C", 
    # "align-loops=16",             # falign-loops
    # "-C",
    # "align-jumps=16",             # falign-jumps
    # "-C",
    # "align-labels=16",            # -falign-labels behavior
    # "-C",
    # "strength-reduce=yes",
    "-C",
    "target-cpu=i686",
    "-C",
    "link-arg=-m32",
    "-C",
    "debuginfo=2",     # full debug info
    # "-C",
    # "force-frame-pointers=no",    # -fomit-frame-pointer
]
